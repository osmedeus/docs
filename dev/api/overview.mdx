---
title: "API Overview"
icon: "book-open"
---

Osmedeus provides a REST API for programmatic access.

## Starting the Server

```bash
osmedeus server
```

Default: `http://localhost:8002`

## Authentication

### Get Token

```bash
curl -X POST http://localhost:8002/osm/api/login \
  -H "Content-Type: application/json" \
  -d '{"username": "osmedeus", "password": "osmedeus-admin"}'
```

Response:
```json
{
  "token": "eyJhbGciOiJIUzI1NiIs...",
  "expires_at": "2024-01-16T14:30:00Z"
}
```

### Use Token

Include in Authorization header:
```bash
curl http://localhost:8002/osm/api/workflows \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIs..."
```

### Default Credentials

Configure in `osm-settings.yaml`:
```yaml
server:
  username: osmedeus
  password: [REDACTED:password]
```

## API Documentation

Swagger UI available at: `http://localhost:8002/swagger/`

## Public Endpoints

No authentication required:

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/health` | Health check |
| GET | `/health/ready` | Readiness probe |
| GET | `/server-info` | Server version and info |
| GET | `/swagger/*` | API documentation |

## Endpoint Categories

### Workflows

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/osm/api/workflows` | List all workflows |
| GET | `/osm/api/workflows/:name` | Get workflow details |
| GET | `/osm/api/workflows/tags` | Get all workflow tags |
| POST | `/osm/api/workflows/refresh` | Refresh workflow index |

### Runs

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/osm/api/runs` | Create and start a run |
| GET | `/osm/api/runs` | List runs |
| GET | `/osm/api/runs/:id` | Get run details |
| DELETE | `/osm/api/runs/:id` | Cancel a run |
| GET | `/osm/api/runs/:id/steps` | Get run steps |
| GET | `/osm/api/runs/:id/artifacts` | Get run artifacts |

### Schedules

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/osm/api/schedules` | List schedules |
| POST | `/osm/api/schedules` | Create schedule |
| GET | `/osm/api/schedules/:id` | Get schedule |
| PUT | `/osm/api/schedules/:id` | Update schedule |
| DELETE | `/osm/api/schedules/:id` | Delete schedule |
| POST | `/osm/api/schedules/:id/enable` | Enable schedule |
| POST | `/osm/api/schedules/:id/disable` | Disable schedule |
| POST | `/osm/api/schedules/:id/trigger` | Trigger manually |

### Data

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/osm/api/workspaces` | List workspaces |
| GET | `/osm/api/assets` | List assets |
| GET | `/osm/api/vulnerabilities` | List vulnerabilities |
| GET | `/osm/api/stats` | System statistics |
| GET | `/osm/api/event-logs` | Event logs |

### Utilities

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/osm/api/functions/eval` | Evaluate function |
| GET | `/osm/api/functions/list` | List functions |
| POST | `/osm/api/upload-file` | Upload file |
| POST | `/osm/api/workflow-upload` | Upload workflow |

### Snapshots

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/osm/api/snapshots` | List snapshots |
| POST | `/osm/api/snapshots/export` | Export workspace |
| POST | `/osm/api/snapshots/import` | Import workspace |
| GET | `/osm/api/snapshots/download/:name` | Download snapshot |

### LLM (OpenAI-compatible)

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/osm/api/llm/v1/chat/completions` | Chat completion |
| POST | `/osm/api/llm/v1/embeddings` | Generate embeddings |

### Distributed (Master only)

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/osm/api/workers` | List workers |
| GET | `/osm/api/workers/:id` | Worker details |
| GET | `/osm/api/tasks` | List tasks |
| GET | `/osm/api/tasks/:id` | Task details |
| POST | `/osm/api/tasks` | Submit task |

## Common Examples

### Start a Scan

```bash
curl -X POST http://localhost:8002/osm/api/runs \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "flow": "general",
    "target": "example.com",
    "params": {
      "threads": "50"
    }
  }'
```

### List Runs

```bash
curl "http://localhost:8002/osm/api/runs?status=running&limit=10" \
  -H "Authorization: Bearer $TOKEN"
```

### Cancel Run

```bash
curl -X DELETE http://localhost:8002/osm/api/runs/run-123 \
  -H "Authorization: Bearer $TOKEN"
```

### Query Assets

```bash
curl "http://localhost:8002/osm/api/assets?workspace=example.com&status_code=200" \
  -H "Authorization: Bearer $TOKEN"
```

### Evaluate Function

```bash
curl -X POST http://localhost:8002/osm/api/functions/eval \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"script": "fileLength(\"/path/to/file\")"}'
```

## Response Format

### Success

```json
{
  "data": { ... },
  "meta": {
    "total": 100,
    "offset": 0,
    "limit": 20
  }
}
```

### Error

```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid target format"
  }
}
```

## Pagination

For list endpoints:

```bash
curl "http://localhost:8002/osm/api/runs?offset=20&limit=10" \
  -H "Authorization: Bearer $TOKEN"
```

Parameters:
- `offset` - Skip N records (default: 0)
- `limit` - Max records to return (default: 20)

## Detailed Documentation

For comprehensive API documentation with all request/response schemas:
- Swagger UI: `http://localhost:8002/swagger/`
- Detailed docs: [../api/](../../api/README.md)

## Next Steps

- [Quick Reference](quick-reference.md) - All endpoints
- [Server CLI](../cli/server.md) - Server setup
- [Deployment](../getting-started/deployment.md) - Production setup
