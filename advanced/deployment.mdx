---
title: "Deployment"
description: "Deploy Osmedeus as a server or in distributed mode"
icon: "cloud"
---

Deploy Osmedeus as a server or in distributed mode.

## Single Server

### Start the Server

```bash
# Default configuration
osmedeus server

# Custom host and port
osmedeus server --host 0.0.0.0 --port 8080

# Disable authentication (development only)
osmedeus server -A
```

The server provides:
- REST API at `http://localhost:8002/osm/api/`
- Swagger docs at `http://localhost:8002/swagger/`
- Health check at `http://localhost:8002/health`
- Web UI at `http://localhost:8002/` (if configured)

### Authentication

Default credentials (change in `osm-settings.yaml`):
- Username: `osmedeus`
- Password: `osmedeus-admin`

Get a JWT token:

```bash
curl -X POST http://localhost:8002/osm/api/login \
  -H "Content-Type: application/json" \
  -d '{"username": "osmedeus", "password": "osmedeus-admin"}'
```

Use the token in subsequent requests:

```bash
curl http://localhost:8002/osm/api/workflows \
  -H "Authorization: Bearer <token>"
```

## Distributed Mode

Scale scanning across multiple machines using Redis for coordination.

### Architecture

```
┌─────────────────┐     ┌─────────────────┐
│     Master      │     │     Redis       │
│   (API Server)  │────▶│   (Task Queue)  │
└─────────────────┘     └────────┬────────┘
                                 │
        ┌────────────────────────┼────────────────────────┐
        │                        │                        │
        ▼                        ▼                        ▼
┌───────────────┐       ┌───────────────┐       ┌───────────────┐
│   Worker 1    │       │   Worker 2    │       │   Worker N    │
└───────────────┘       └───────────────┘       └───────────────┘
```

### Start Master

```bash
# Start master with default Redis (localhost:6379)
osmedeus server --master

# Custom Redis URL
osmedeus server --master --redis-url redis://redis-host:6379
```

### Start Workers

On each worker machine:

```bash
# Join as worker
osmedeus worker join

# Custom Redis URL
osmedeus worker join --redis-url redis://redis-host:6379
```

### Submit Distributed Scans

```bash
# Submit to distributed queue
osmedeus run -f general -t example.com -D

# With custom Redis
osmedeus run -f general -t example.com -D --redis-url redis://redis-host:6379
```

### Monitor Status

```bash
# Check worker status
osmedeus worker status
```

Via API:

```bash
# List workers
curl http://master:8002/osm/api/workers -H "Authorization: Bearer <token>"

# List tasks
curl http://master:8002/osm/api/tasks -H "Authorization: Bearer <token>"
```

## Docker Deployment

### Using Pre-built Image

The official Docker image is available on Docker Hub:

```bash
# Pull the latest image
docker pull j3ssie/osmedeus:latest

# Show help
docker run --rm j3ssie/osmedeus:latest --help

# Run a scan
docker run --rm -v $(pwd)/output:/root/workspaces-osmedeus \
    j3ssie/osmedeus:latest run -f general -t example.com

# Run as server
docker run -d \
  --name osmedeus \
  -p 8002:8002 \
  -v osmedeus-data:/root/osmedeus-base \
  j3ssie/osmedeus:latest server
```

### Building from Source

```bash
# Build image locally
docker build -t j3ssie/osmedeus:latest -f build/docker/Dockerfile .

# Or use make target
make docker-build

# Build and push to Docker Hub (maintainers only)
make docker-publish
```

### Single Container

```bash
# Run container
docker run -d \
  --name osmedeus \
  -p 8002:8002 \
  -v osmedeus-data:/root/osmedeus-base \
  j3ssie/osmedeus:latest server
```

### Docker Compose (Distributed)

Create `docker-compose.yml`:

```yaml
version: '3.8'

services:
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  master:
    image: j3ssie/osmedeus:latest
    command: server --master
    ports:
      - "8002:8002"
    environment:
      - REDIS_URL=redis://redis:6379
    depends_on:
      - redis
    volumes:
      - master-data:/root/osmedeus-base

  worker:
    image: j3ssie/osmedeus:latest
    command: worker join
    environment:
      - REDIS_URL=redis://redis:6379
    depends_on:
      - redis
      - master
    deploy:
      replicas: 3

volumes:
  master-data:
```

Run:

```bash
# Start services
docker-compose up -d

# Scale workers
docker-compose up -d --scale worker=5

# View logs
docker-compose logs -f master
docker-compose logs -f worker
```

## Production Considerations

### Security

1. **Change default credentials** in `osm-settings.yaml`
2. **Use HTTPS** - Put behind a reverse proxy (nginx, Caddy)
3. **Restrict network access** - Firewall rules for Redis and API
4. **Use secrets management** - Environment variables for passwords

### Reverse Proxy (nginx)

```nginx
server {
    listen 443 ssl;
    server_name osmedeus.example.com;

    ssl_certificate /etc/ssl/certs/osmedeus.crt;
    ssl_certificate_key /etc/ssl/private/osmedeus.key;

    location / {
        proxy_pass http://localhost:8002;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### Resource Limits

In Docker Compose:

```yaml
worker:
  deploy:
    resources:
      limits:
        cpus: '2'
        memory: 4G
```

### Persistence

- Mount volumes for `/root/osmedeus-base`
- Use external Redis with persistence
- Consider PostgreSQL for production

## Next Steps

- [Configuration](configuration) - Server and database settings
- [API Overview](../api/overview) - API documentation
- [Distributed Execution](../advanced/distributed) - Advanced distributed topics
